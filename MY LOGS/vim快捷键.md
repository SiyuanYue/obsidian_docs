# vim/vi
## 移动光标
当在 vi 命令模式下时，vi 提供了大量的移动命令，其中一些是与 less 阅读器共享的。这里 列举了一些：

### 按键	移动光标
```l``` or 右箭头	向右移动一个字符
```h``` or 左箭头	向左移动一个字符
 ```j``` or 下箭头	向下移动一行
 ```k``` or 上箭头	向上移动一行
 ```0``` (零按键)	移动到当前行的行首。
 ```^```	移动到当前行的第一个非空字符。
 ```$```	移动到当前行的末尾。
 ```w```	移动到下一个单词或标点符号的开头。
 ```W```	移动到下一个单词的开头，忽略标点符号。
 ```b```	移动到上一个单词或标点符号的开头。
 ```B```	移动到上一个单词的开头，忽略标点符号。
```Ctrl-f``` or ```Page Down```	向下翻一页
```Ctrl-b``` or ```Page Up```	向上翻一页
```numberG```	移动到第 number 行。例如，1G 移动到文件的第一行。
```G```	移动到文件末尾。

### 在行尾附加文本
vi 提供了一种快捷方式来移动到当前行的末尾，并且能添加 文本。它是**A**命令
### 打开一行
我们插入文本的另一种方式是“打开”一行。这会在存在的两行之间插入一个空白行，并且进入插入模式。 这种方式有两个变体：
文本行打开按键
命令	打开行
```o```	当前行的下方打开一行。
```O```	当前行的上方打开一行。
### 删除/剪贴文本
```x```	   当前字符
```3x```	当前字符及其后的两个字符。
```dd```	当前行。
```5dd```	当前行及随后的四行文本。
```dW```	从光标位置开始到下一个单词的开头。
```d$```	从光标位置开始到当前行的行尾。
```d0```	从光标位置开始到当前行的行首。
```d^```	从光标位置开始到文本行的第一个非空字符。
```dG```	从当前行到文件的末尾。
```d20G```	从当前行到文件的第20行。

### 剪切，复制和粘贴文本
小 p 命令把剪切板中的文本粘贴到光标位置之后.
大 P 命令把文本粘贴到光标之前.

y 命令用来“拉”（复制）文本，和 d 命令剪切文本的方式差不多。这里有些把 y 命令和各种移动命令 结合起来使用的实例：

##### 命令	复制的内容
```yy```	当前行。
```5yy```	当前行及随后的四行文本。
```yW```	从当前光标位置到下一个单词的开头。
```y$```	从当前光标位置到当前行的末尾。
```y0```	从当前光标位置到行首。
```y^```	从当前光标位置到文本行的第一个非空字符。
```yG```	从当前行到文件末尾。
```y20G```	从当前行到文件的第20行。

### 连接行
大写的 J（不要与小写的 j 混淆了， j 是用来移动光标的）把行与行之间连接起来

### 查找和替换
vi 有能力把光标移到搜索到的匹配项上。vi 可以在单一行或整个文件中运用这个功能。 它也可以在有或没有用户确认的情况下实现文本替换。

**查找一行**
```f``` 命令查找一行，移动光标到下一个所指定的字符上。
**查找整个文件**
当你输入```/```命令后，一个```/```字符会出现在屏幕底部。下一步，输入要查找的单词或短语后， 按下回车。
光标就会移动到下一个包含所查找字符串的位置。通过 ```n ```命令来重复先前的查找。
> vi 允许使用正则表达式，一种强大的用来表示复杂文本模式的方法。我们将会在随后 的章节里面详尽地介绍正则表达式。

### 全局查找和替代
vi 使用 ex 命令来执行查找和替代操作（vi 中叫做“替换”）。把整个文件中的单词“Line”更改为“line”， 我们输入以下命令：
 ``` : % s / Line/ line / g```
我们把这个命令分解为几个单独的部分，看一下每部分的含义：
```:```	冒号字符运行一个 ex 命令。
```%```	指定要操作的行数。```%``` 是一个快捷方式，表示从第一行到最后一行。另外，操作范围也 可以用 1,5 来代替因为我们的文件只有5行文本），或者用 ```1,$``` 来代替，意思是 “ 从第一行到文件的最后一行。” 如果省略了文本行的范围，那么操作只对当前行生效。
```s```	指定操作。在这种情况下是，替换（查找与替代）。
```/Line/line```	查找类型与替代文本。
```g	```这是“全局”的意思，意味着对文本行中所有匹配的字符串执行查找和替换操作。如果省略 g，则 只替换每个文本行中第一个匹配的字符串。

指定一个需要用户确认的替换命令。通过添加一个```c```字符到这个命令的末尾，来完成 这个替换命令。例如：
```:%s/line/Line/gc```
这个命令会把我们的文件恢复先前的模样；然而，在执行每个替换命令之前，vi 会停下来， 通过下面的信息，来要求我们确认这个替换：
```replace with Line (y/n/a/q/l/^E/^Y)?```
括号中的每个字符都是一个可能的选择，如下所示：
```y```	执行替换操作
```n```	跳过这个匹配的实例
```a	```对这个及随后所有匹配的字符串执行替换操作。
```q``` or esc	退出替换操作。
```l```	执行这次替换并退出。l 是 “last” 的简写。
```Ctrl-e```, ```Ctrl-y```	分别是向下滚动和向上滚动。用于查看建议替换的上下文。
通过 vi，我们可以打开多个文件来编辑，只要在命令行中指定要编辑的文件名。
```vi file1 file2 file3...```
### 文件之间转换
从这个文件转到下一个文件，使用这个 ex 命令：
```:n```
回到先前的文件使用：
```:N```
当我们从一个文件移到另一个文件时，如果当前文件没有保存修改，vi 会阻止我们转换文件， 这是 vi 强制执行的政策。在命令之后添加感叹号，可以强迫 vi 放弃修改而转换文件。

另外，上面所描述的转换方法，vim（和一些版本的 vi）也提供了一些 ex 命令，这些命令使 多个文件更容易管理。我们可以查看正在编辑的文件列表，使用```:buffers ```命令。运行这个 命令后，屏幕顶部就会显示出一个文件列表

**插入整个文件到另一个文件**
```:r foo.txt```
这个```:r``` 命令（是”read”的简称）把指定的文件插入到光标位置之前。
保存工作
像 vi 中的其它操作一样，有几种不同的方法来保存我们所修改的文件。我们已经研究了```:w ```这个 ex 命令， 但还有几种方法，可能我们也觉得有帮助。

在命令模式下，输入 ```ZZ``` 就会保存并退出当前文件。同样地，ex 命令```:wq``` 把:w 和:q 命令结合到 一起，来完成保存和退出任务。

这个```:w ```命令也可以指定可选的文件名。这个的作用就如”Save As…“。例如，如果我们 正在编辑 foo.txt 文件，想要保存一个副本，叫做 foo1.txt，那么我们可以执行以下命令：
```:w foo1.txt```
注意：当上面的命令以一个新名字保存文件时，但它并没有更改你正在编辑的文件的名字。 如果你继续编辑的话，你还是在编辑文件 foo.txt，而不是 foo1.txt。
