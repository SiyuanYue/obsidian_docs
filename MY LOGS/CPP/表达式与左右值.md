
# å·¦å€¼ä¸å³å€¼ï¼ˆåŸºç¡€ç¯‡ï¼‰
å³å€¼ï¼šæ— æ³•å–åˆ°åœ°å€
å·¦å€¼ï¼šèƒ½å¤Ÿå–åˆ°åœ°å€
![[Pasted image 20240219183420.png]]
`&(a+1) ?`
**æ³¨æ„ï¼**
![[Pasted image 20240219183702.png]]

![[Pasted image 20240219183915.png]]

---




# è¡¨è¾¾å¼ 
[è¡¨è¾¾å¼ - cppreference.com](https://zh.cppreference.com/w/cpp/language/expressions)
* è¿ç®—ç¬¦ä¸ä»–ä»¬çš„æ“ä½œæ•°çš„åºåˆ—ï¼Œå®ƒæŒ‡å®šä¸€é¡¹è®¡ç®—
* è¡¨è¾¾å¼çš„æ±‚å€¼å¯ä»¥äº§ç”Ÿä¸€ä¸ªç»“æœï¼ˆæ¯”å¦‚Â 2Â +Â 2Â çš„æ±‚å€¼äº§ç”Ÿç»“æœÂ 4ï¼‰ï¼Œä¹Ÿå¯èƒ½äº§ç”Ÿå‰¯ä½œç”¨ï¼ˆæ¯”å¦‚å¯¹ `Â std::printf("%d",Â 4)` çš„æ±‚å€¼åœ¨æ ‡å‡†è¾“å‡ºä¸Šæ‰“å°å­—ç¬¦Â 4ï¼‰ã€‚
* æ¯ä¸ª C++ è¡¨è¾¾å¼å‡è¢«æè¿°ä¸ºå…·æœ‰ä¸¤ç§ç‹¬ç«‹çš„æ€§è´¨ï¼š*ç±»å‹*å’Œ*å€¼ç±»åˆ«*ã€‚
 
 [å€¼ç±»åˆ«]( https://zh.cppreference.com/w/cpp/language/value_category "cpp/language/value category")ï¼ˆå·¦å€¼ (lvalue)ã€å³å€¼ (rvalue)ã€æ³›å·¦å€¼ (glvalue)ã€çº¯å³å€¼ (prvalue)ã€äº¡å€¼ (xvalue)Â (C++11 èµ·)ï¼‰æ˜¯æ ¹æ®è¡¨è¾¾å¼çš„å€¼æ‰€è¿›è¡Œçš„åˆ†ç±»
 - **[æ³›å·¦å€¼](https://zh.cppreference.com/w/cpp/language/value_category#.E6.B3.9B.E5.B7.A6.E5.80.BC)Â (glvalue)**ï¼ˆâ€œæ³›åŒ– (generalized)â€çš„å·¦å€¼ï¼‰æ˜¯ä¸€ä¸ªæ±‚å€¼å¯ç¡®å®šæŸä¸ªå¯¹è±¡æˆ–å‡½æ•°çš„æ ‡è¯†çš„è¡¨è¾¾å¼ï¼›
- **[çº¯å³å€¼](https://zh.cppreference.com/w/cpp/language/value_category#.E7.BA.AF.E5.8F.B3.E5.80.BC)Â (prvalue)**ï¼ˆâ€œçº¯ (pure)â€çš„å³å€¼ï¼‰æ˜¯æ±‚å€¼ç¬¦åˆä¸‹åˆ—ä¹‹ä¸€çš„è¡¨è¾¾å¼ï¼š
    - è®¡ç®—æŸä¸ªè¿ç®—ç¬¦çš„æ“ä½œæ•°çš„å€¼ï¼ˆè¿™ç§çº¯å³å€¼æ²¡æœ‰_ç»“æœå¯¹è±¡_ï¼‰
    - åˆå§‹åŒ–æŸä¸ªå¯¹è±¡ï¼ˆç§°è¿™ç§çº¯å³å€¼æœ‰ä¸€ä¸ª_ç»“æœå¯¹è±¡_ï¼‰ã€‚ç»“æœå¯¹è±¡å¯ä»¥æ˜¯å˜é‡ï¼Œç”±Â [new è¡¨è¾¾å¼](https://zh.cppreference.com/w/cpp/language/new "cpp/language/new")åˆ›å»ºçš„å¯¹è±¡ï¼Œç”±[ä¸´æ—¶é‡å®è´¨åŒ–](https://zh.cppreference.com/w/cpp/language/implicit_conversion#.E4.B8.B4.E6.97.B6.E9.87.8F.E5.AE.9E.E8.B4.A8.E5.8C.96 "cpp/language/implicit conversion")åˆ›å»ºçš„ä¸´æ—¶å¯¹è±¡ï¼Œæˆ–è€…å‰è¿°ä¸‰ç±»å¯¹è±¡çš„æˆå‘˜ã€‚æ³¨æ„ï¼ŒéÂ voidÂ çš„[å¼ƒå€¼è¡¨è¾¾å¼](https://zh.cppreference.com/w/cpp/language/expressions#.E5.BC.83.E5.80.BC.E8.A1.A8.E8.BE.BE.E5.BC.8F "cpp/language/expressions")æœ‰ç»“æœå¯¹è±¡ï¼ˆå³è¢«å®è´¨åŒ–çš„ä¸´æ—¶é‡ï¼‰ã€‚å¹¶ä¸”åœ¨ä½œä¸ºÂ [`decltype`](https://zh.cppreference.com/w/cpp/language/decltype "cpp/language/decltype")Â çš„æ“ä½œæ•°ä»¥å¤–çš„æƒ…å†µä¸‹ï¼Œæ¯ä¸ªç±»ç±»å‹æˆ–æ•°ç»„ç±»å‹çš„çº¯å³å€¼éƒ½æœ‰ç»“æœå¯¹è±¡ï¼›

- **[äº¡å€¼](https://zh.cppreference.com/w/cpp/language/value_category#.E4.BA.A1.E5.80.BC)Â (xvalue)**ï¼ˆâ€œå°†äº¡ (expiring)â€çš„å€¼ï¼‰æ˜¯ä»£è¡¨å®ƒçš„èµ„æºèƒ½å¤Ÿè¢«é‡æ–°ä½¿ç”¨çš„å¯¹è±¡æˆ–ä½åŸŸçš„æ³›å·¦å€¼ï¼›
- **[å·¦å€¼](https://zh.cppreference.com/w/cpp/language/value_category#.E5.B7.A6.E5.80.BC)Â (lvalue)**Â æ˜¯å¹¶éäº¡å€¼çš„æ³›å·¦å€¼ï¼›
 
 è¡¨è¾¾å¼æ‰æœ‰å·¦å€¼æˆ–å³å€¼ç­‰å€¼ç±»åˆ«çš„è¯´æ³•ï¼Œå˜é‡å¹¶ä¸éœ€è¦è€ƒé‡è¿™ä¸ªã€‚
 `int&& a=1;`  `a` æ˜¯ä¸€ä¸ª*å·¦å€¼è¡¨è¾¾å¼*ï¼Œå®ƒçš„ç±»å‹æ˜¯ `int&&`, å³ `int` å³å€¼å¼•ç”¨ç±»å‹
 - **[å³å€¼](https://zh.cppreference.com/w/cpp/language/value_category#.E5.8F.B3.E5.80.BC)Â (rvalue)**Â æ˜¯çº¯å³å€¼æˆ–è€…äº¡å€¼ï¼›


#### C++11
éšç€ç§»åŠ¨è¯­ä¹‰å¼•å…¥åˆ° C++11 ä¹‹ä¸­ï¼Œå€¼ç±»åˆ«è¢«é‡æ–°è¿›è¡Œäº†å®šä¹‰ï¼Œä»¥åŒºåˆ«è¡¨è¾¾å¼çš„ä¸¤ç§ç‹¬ç«‹çš„æ€§è´¨[5](https://zh.cppreference.com/w/cpp/language/value_category#cite_note-5)ï¼š
- _æ‹¥æœ‰èº«ä»½ (identity)_ï¼šå¯ä»¥ç¡®å®šè¡¨è¾¾å¼æ˜¯å¦ä¸å¦ä¸€è¡¨è¾¾å¼æŒ‡ä»£åŒä¸€å®ä½“ï¼Œä¾‹å¦‚é€šè¿‡æ¯”è¾ƒå®ƒä»¬æ‰€æ ‡è¯†çš„å¯¹è±¡æˆ–å‡½æ•°çš„ï¼ˆç›´æ¥æˆ–é—´æ¥è·å¾—çš„ï¼‰åœ°å€ï¼›
- _å¯è¢«ç§»åŠ¨_ï¼š[ç§»åŠ¨æ„é€ å‡½æ•°](https://zh.cppreference.com/w/cpp/language/move_constructor "cpp/language/move constructor")ã€[ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦](https://zh.cppreference.com/w/cpp/language/move_assignment "cpp/language/move assignment")æˆ–å®ç°äº†ç§»åŠ¨è¯­ä¹‰çš„å…¶ä»–å‡½æ•°é‡è½½èƒ½å¤Ÿç»‘å®šäºè¿™ä¸ªè¡¨è¾¾å¼ã€‚

C++11 ä¸­ï¼š
- æ‹¥æœ‰èº«ä»½ä¸”ä¸å¯è¢«ç§»åŠ¨çš„è¡¨è¾¾å¼è¢«ç§°ä½œ_å·¦å€¼ (lvalue)_è¡¨è¾¾å¼ï¼›
- æ‹¥æœ‰èº«ä»½ä¸”å¯è¢«ç§»åŠ¨çš„è¡¨è¾¾å¼è¢«ç§°ä½œ_äº¡å€¼ (xvalue)_è¡¨è¾¾å¼ï¼›
- ä¸æ‹¥æœ‰èº«ä»½ä¸”å¯è¢«ç§»åŠ¨çš„è¡¨è¾¾å¼è¢«ç§°ä½œ_çº¯å³å€¼ (prvalue)_è¡¨è¾¾å¼ï¼›
- ä¸æ‹¥æœ‰èº«ä»½ä¸”ä¸å¯è¢«ç§»åŠ¨çš„è¡¨è¾¾å¼æ— æ³•ä½¿ç”¨[6](https://zh.cppreference.com/w/cpp/language/value_category#cite_note-6)ã€‚

æ‹¥æœ‰èº«ä»½çš„è¡¨è¾¾å¼è¢«ç§°ä½œâ€œæ³›å·¦å€¼ (glvalue) è¡¨è¾¾å¼â€ã€‚å·¦å€¼å’Œäº¡å€¼éƒ½æ˜¯æ³›å·¦å€¼è¡¨è¾¾å¼ã€‚
å¯è¢«ç§»åŠ¨çš„è¡¨è¾¾å¼è¢«ç§°ä½œâ€œå³å€¼ (rvalue) è¡¨è¾¾å¼â€ã€‚çº¯å³å€¼å’Œäº¡å€¼éƒ½æ˜¯å³å€¼è¡¨è¾¾å¼ã€‚
#### C++17
C++17 ä¸­ï¼ŒæŸäº›åœºåˆå¼ºåˆ¶è¦æ±‚è¿›è¡Œ[å¤åˆ¶æ¶ˆé™¤](https://zh.cppreference.com/w/cpp/language/copy_elision "cpp/language/copy elision")ï¼Œè€Œè¿™è¦æ±‚å°†çº¯å³å€¼è¡¨è¾¾å¼ä»è¢«å®ƒä»¬æ‰€åˆå§‹åŒ–çš„ä¸´æ—¶å¯¹è±¡ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ç°æœ‰çš„ç³»ç»Ÿã€‚è¦æ³¨æ„ï¼Œä¸ C++11 çš„æ–¹æ¡ˆç›¸æ¯”ï¼Œçº¯å³å€¼å·²ä¸å†æ˜¯å¯è¢«ç§»åŠ¨ã€‚


## å¸¸é‡è¡¨è¾¾å¼
* åªèƒ½åœ¨ç¼–è¯‘æ—¶æ±‚å€¼ï¼Œè®¡ç®—ç»“æœä¸ºå¸¸é‡
 ```CPP
 const int n=10;//nå°±æ˜¯ä¸€ä¸ªå¸¸é‡è¡¨è¾¾å¼
 int arr[n];//OKçš„
```
![[Pasted image 20240219191124.png]]

## æ½œåœ¨æ±‚å€¼è¡¨è¾¾å¼      ä¸ä¼šæ½œåœ¨æ±‚å€¼çš„è¡¨è¾¾å¼
```CPP
sizeof(std::cout << "1"); // ä¸æ±‚å€¼è¯­å¢ƒ  
int i = 0;  
typeid(++i);  
noexcept(++i);  
//decltype(++i) ;    // gcc å¯èƒ½æ— æ³•é€šè¿‡ç¼–è¯‘ï¼Œæ­£å¸¸ç°è±¡ï¼Œåˆç†  
decltype(++i) a = i; // è¢«æ¨å¯¼ä¸ºå¼•ç”¨ï¼Œè®°å¾—åˆå§‹åŒ–ã€‚  
std::cout << i << '\n'; //0
```
å¯ä»¥é€šè¿‡ç¼–è¯‘ï¼Œä½†ä¸ä¼šæœ‰è¾“å‡ºï¼Œå› ä¸º `sizeof` æ˜¯ä¸æ±‚å€¼è¯­å¢ƒã€‚
æœ€åæ‰“å°å‡º 0ï¼Œå› ä¸º `typeid` ï¼Œ`noexcept` , `decltype` ä¹Ÿæ˜¯ä¸æ±‚å€¼è¯­å¢ƒ.
`decltype` æ˜¯ C++11 ä¸­å¼•å…¥çš„ä¸€ä¸ªå…³é”®å­—ï¼Œç”¨äºè·å–è¡¨è¾¾å¼çš„æ•°æ®ç±»å‹ã€‚å®ƒå¯ä»¥ç”¨äºå£°æ˜å˜é‡ã€å‡½æ•°è¿”å›å€¼ç±»å‹ä»¥åŠæ¨¡æ¿å‚æ•°çš„ç±»å‹æ¨å¯¼ã€‚
[key :: value]
ğŸ˜˜
>å…³äºtypeid
>åœ¨ C++ä¸­ï¼Œtypeid æ˜¯ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œç”¨äºè¿”å›ä¸€ä¸ªè¡¨ç¤ºå¯¹è±¡ç±»å‹çš„ `std:: type_info` å¯¹è±¡ã€‚å®ƒå¯ä»¥ç”¨æ¥ç¡®å®šå¯¹è±¡çš„å®é™…ç±»å‹ï¼Œä»¥ä¾¿è¿›è¡Œè¿è¡Œæ—¶ç±»å‹æ£€æŸ¥æˆ–æ‰§è¡Œç‰¹å®šç±»å‹çš„æ“ä½œã€‚
>typeid è¿ç®—ç¬¦å¯ä»¥ç”¨äºä»»ä½•*è¡¨è¾¾å¼*ã€*ç±»å‹*æˆ–*å˜é‡*ï¼Œè¿”å›ä¸€ä¸ª const std::type_info&ç±»å‹çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ typeid æ¥æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„ç±»å‹æ˜¯å¦ç›¸åŒï¼Œæˆ–è€…åœ¨**è¿è¡Œæ—¶ç¡®å®šå¯¹è±¡çš„å®é™…ç±»å‹**ã€‚
>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼Œæ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨typeidè¿ç®—ç¬¦æ¥è·å–å¯¹è±¡çš„ç±»å‹ä¿¡æ¯ï¼š

```CPP
#include <iostream>
#include <typeinfo>

class Base {
public:
    virtual void foo() {}
};

class Derived : public Base {
};

int main() {
    Base* basePtr = new Derived();
    
    if (typeid(*basePtr) == typeid(Derived)) {
        std::cout << "basePtræŒ‡å‘Derivedç±»å¯¹è±¡" << std::endl;
    } else {
        std::cout << "basePträ¸æ˜¯æŒ‡å‘Derivedç±»å¯¹è±¡" << std::endl;
    }
    
    delete basePtr;
    
    return 0;
}

```

>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåŸºç±» Base å’Œä¸€ä¸ªæ´¾ç”Ÿç±» Derivedï¼Œå¹¶ä½¿ç”¨ `typeid` è¿ç®—ç¬¦æ¥æ£€æŸ¥ `basePtr` æŒ‡é’ˆæ‰€æŒ‡å‘çš„å¯¹è±¡æ˜¯å¦æ˜¯ Derived ç±»çš„å®ä¾‹ã€‚é€šè¿‡æ¯”è¾ƒ `typeid (*basePtr)` å’Œ `typeid (Derived)`ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®š `basePtr` æŒ‡å‘çš„å¯¹è±¡çš„å®é™…ç±»å‹ã€‚

## å¼ƒå€¼è¡¨è¾¾å¼
```CPP
// å¼ƒå€¼è¡¨è¾¾å¼   
template<typename...Args>  
void print(const Args&...args){  
    using T = int[];  
    (void)T{(std::cout<<args<<' ',0)... };  
}
int main()
{
	print(1, 2, 3);
}
```