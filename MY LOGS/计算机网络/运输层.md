# 1. 传输层服务

路由器只有网络层、链路层、物理层这三层。
网络层：提供**主机**之间的逻辑通信机制
传输层位于**端系统**上。为端到端之间不同主机上的**进程**提供一种**逻辑通信机制**
* 发送方：将应用递交的消息分成一个或多个segment，向下传给网络层
* 接受层   接受segment，组装成消息，分发给应用层

依赖于网络层服务，对网络层服务进行增强
可向应用层提供多种协议：TCP、UDP...

TCP：
可靠、按序

UDP：
不可靠，几乎贴近网络层服务

均不保证延迟带宽

# 2.多路复用和多路分用
### Why？
**一对多**
只有一个网络层去传输，但有多个进程（Socket）需要通信

接受端：传输层依据**头部信息**将Segment交给正确的Socket，即不同进程
发送端：从多个Socket接受数据，为每款数据封装上头部信息，生成segment，交给网络层

## 如何实现？
主机接收到IP数据报：
     数据包携带源IP地址，目的IP地址
     携带一个传输层的段Segment
	 每个Segment携带源端口号和目的端口号 *端口号信息对网络层透明*
传输层协议提取IP地址和端口号信息，将Segment导向相应套接字。
*TCP还会做些别的事情*

### 无连接（UDP）多路复用：
创建UDP Socket 用二元组**标识**（目的IP地址，目的端口号）
主机接收到UDP Segment：
	检查段中的**目的**端口号
	将这个Segment导向绑定到该端口号的Socket
	
只要目的端口号一样，就会导向同一个套接字，无论源IP地址或端口号
源IP地址或端口号是响应消息发送时用的

端口号与Socket之间的关系？

## 面向连接（TCP）的多路复用
四元组**标识**：
**<font color="#dd0000">源IP地址</font>**
**<font color="#dd0000">源端口号</font>**
目的IP地址
目的端口号


# 4 可靠数据传输
Rdt2.0 :
差错检验
接收方反馈**控制**信息：ACK/NAK
重传